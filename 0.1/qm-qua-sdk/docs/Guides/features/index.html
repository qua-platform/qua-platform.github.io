<!-- Elements added to main will be displayed on all pages -->
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Quantum machines documentation pages for OPX, OPX+, Octave, and more. Bootstrap your work with Use cases and Solutions,  and get engaged with community." name="description"/>
<meta content="Q.M Technologies Ltd." name="author"/>
<link href="https://docs.quantum-machines.co/0.1/qm-qua-sdk/docs/Guides/features/" rel="canonical"/>
<link href="../best_practices/" rel="prev"/>
<link href="../qua_ref/" rel="next"/>
<link href="../../../../assets/qm_logo_white.svg" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.13+insiders-4.32.0" name="generator"/>
<title>QUA Language features - Documentation</title>
<link href="../../../../assets/stylesheets/main.e95b5de1.min.css" rel="stylesheet"/>
<link href="../../../../assets/stylesheets/palette.6932e648.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../../css/timeago.css" rel="stylesheet"/>
<link href="../../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-ZLWJVGXXPW"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-ZLWJVGXXPW",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-ZLWJVGXXPW",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
<script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
<meta content="website" property="og:type"/>
<meta content="QUA Language features - Documentation" property="og:title"/>
<meta content="Quantum machines documentation pages for OPX, OPX+, Octave, and more. Bootstrap your work with Use cases and Solutions,  and get engaged with community." property="og:description"/>
<meta content="https://docs.quantum-machines.co/0.1/assets/images/social/qm-qua-sdk/docs/Guides/features.png" property="og:image"/>
<meta content="image/png" property="og:image:type"/>
<meta content="1200" property="og:image:width"/>
<meta content="630" property="og:image:height"/>
<meta content="https://docs.quantum-machines.co/0.1/qm-qua-sdk/docs/Guides/features/" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="QUA Language features - Documentation" name="twitter:title"/>
<meta content="Quantum machines documentation pages for OPX, OPX+, Octave, and more. Bootstrap your work with Use cases and Solutions,  and get engaged with community." name="twitter:description"/>
<meta content="https://docs.quantum-machines.co/0.1/assets/images/social/qm-qua-sdk/docs/Guides/features.png" name="twitter:image"/>
<link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="entropy-bright" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#qua-language-features">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
<aside class="md-banner md-banner--warning">
<div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../../..">
<strong>Click here to go to latest.</strong>
</a>
</div>
<script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
</aside>
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../../.." title="Documentation">
<img alt="logo" src="../../../../assets/qm_logo_white.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              QUA Language features
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="entropy-bright" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="entropy-dark" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0 9.821 9.821 0 0 0-17.64 0Z"></path></svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="Documentation">
<img alt="logo" src="../../../../assets/qm_logo_white.svg"/>
</a>
    Documentation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../..">
<span class="md-ellipsis">
    
  
    About this Document
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Introduction
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Introduction/qop_overview/">
<span class="md-ellipsis">
    
  
    Conceptual Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Introduction/config/">
<span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Introduction/qua_overview/">
<span class="md-ellipsis">
    
  
    QUA Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Introduction/use_case/">
<span class="md-ellipsis">
    
  
    Example of use
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../best_practices/">
<span class="md-ellipsis">
    
  
    QUA Best practice Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    QUA Language features
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    QUA Language features
  

    
  </span>
</a>
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#measure-statement-features">
<span class="md-ellipsis">
      
        Measure statement features
      
    </span>
</a>
<nav aria-label="Measure statement features" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#demodulation">
<span class="md-ellipsis">
      
        Demodulation
      
    </span>
</a>
<nav aria-label="Demodulation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#full-demodulation">
<span class="md-ellipsis">
      
        Full demodulation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sliced-demodulation">
<span class="md-ellipsis">
      
        Sliced demodulation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#accumulated-demodulation">
<span class="md-ellipsis">
      
        Accumulated demodulation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#moving-window-demodulation">
<span class="md-ellipsis">
      
        Moving window demodulation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration">
<span class="md-ellipsis">
      
        Integration
      
    </span>
</a>
<nav aria-label="Integration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#full">
<span class="md-ellipsis">
      
        Full
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sliced">
<span class="md-ellipsis">
      
        Sliced
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#accumulated">
<span class="md-ellipsis">
      
        Accumulated
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#moving-window">
<span class="md-ellipsis">
      
        Moving window
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-tagging">
<span class="md-ellipsis">
      
        Time tagging
      
    </span>
</a>
<nav aria-label="Time tagging" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#time-tagging-parameters">
<span class="md-ellipsis">
      
        Time-tagging parameters
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-tagging-modes-usage">
<span class="md-ellipsis">
      
        Time-tagging modes &amp; usage
      
    </span>
</a>
<nav aria-label="Time-tagging modes &amp; usage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#basic-time-tagging">
<span class="md-ellipsis">
      
        Basic time-tagging
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#high-resolution-time-tagging">
<span class="md-ellipsis">
      
        High resolution time-tagging
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#flow-control">
<span class="md-ellipsis">
      
        Flow control
      
    </span>
</a>
<nav aria-label="Flow control" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#branching">
<span class="md-ellipsis">
      
        Branching
      
    </span>
</a>
<nav aria-label="Branching" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#if-elif-else">
<span class="md-ellipsis">
      
        If-Elif-Else
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#switch-case">
<span class="md-ellipsis">
      
        Switch-Case
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conditional-play">
<span class="md-ellipsis">
      
        Conditional Play
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ternary-operator">
<span class="md-ellipsis">
      
        Ternary Operator
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#loops">
<span class="md-ellipsis">
      
        Loops
      
    </span>
</a>
<nav aria-label="Loops" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#for">
<span class="md-ellipsis">
      
        For
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#for_each">
<span class="md-ellipsis">
      
        For_Each
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#while">
<span class="md-ellipsis">
      
        While
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pause-resume-and-io-variables">
<span class="md-ellipsis">
      
        Pause, Resume and IO variables
      
    </span>
</a>
<nav aria-label="Pause, Resume and IO variables" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-an-io-variable">
<span class="md-ellipsis">
      
        Setting an IO variable
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reading-an-io-variable">
<span class="md-ellipsis">
      
        Reading an IO variable
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relevant-apis">
<span class="md-ellipsis">
      
        Relevant APIs
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#input-streams">
<span class="md-ellipsis">
      
        Input streams
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sticky-element">
<span class="md-ellipsis">
      
        Sticky Element
      
    </span>
</a>
<nav aria-label="Sticky Element" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#voltage-easing">
<span class="md-ellipsis">
      
        Voltage easing
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ramp-pulse">
<span class="md-ellipsis">
      
        Ramp pulse
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#frequency-chirp">
<span class="md-ellipsis">
      
        Frequency chirp
      
    </span>
</a>
<nav aria-label="Frequency chirp" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#non-uniform-chirp-sections">
<span class="md-ellipsis">
      
        Non-uniform chirp sections
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mathematical-formulation-of-the-chirp">
<span class="md-ellipsis">
      
        Mathematical formulation of the chirp
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#continuous-chirp">
<span class="md-ellipsis">
      
        Continuous chirp
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#crosstalk-matrix">
<span class="md-ellipsis">
      
        Crosstalk Matrix
      
    </span>
</a>
<nav aria-label="Crosstalk Matrix" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-examples">
<span class="md-ellipsis">
      
        Usage Examples
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pulse-memory-compression">
<span class="md-ellipsis">
      
        Pulse Memory Compression
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-pulse-duration">
<span class="md-ellipsis">
      
        Dynamic pulse duration
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#truncate-pulses">
<span class="md-ellipsis">
      
        Truncate pulses
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-port-allocation">
<span class="md-ellipsis">
      
        Dynamic port allocation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multiple-inputs">
<span class="md-ellipsis">
      
        Multiple inputs
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analog-delay">
<span class="md-ellipsis">
      
        Analog Delay
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#threads">
<span class="md-ellipsis">
      
        Threads
      
    </span>
</a>
<nav aria-label="Threads" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#automatic-thread-allocation">
<span class="md-ellipsis">
      
        Automatic Thread Allocation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manual-thread-allocation">
<span class="md-ellipsis">
      
        Manual Thread Allocation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#oscillators">
<span class="md-ellipsis">
      
        Oscillators
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#precompile-jobs">
<span class="md-ellipsis">
      
        Precompile Jobs
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compilation-options">
<span class="md-ellipsis">
      
        Compilation options
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../qua_ref/">
<span class="md-ellipsis">
    
  
    Classical computations in QUA
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../variables/">
<span class="md-ellipsis">
    
  
    Variables in QUA
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../timing_in_qua/">
<span class="md-ellipsis">
    
  
    Timing in QUA
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../phase_and_frame/">
<span class="md-ellipsis">
    
  
    Phase and Frame in QUA
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../simulator/">
<span class="md-ellipsis">
    
  
    OPX Simulator
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../stream_proc/">
<span class="md-ellipsis">
    
  
    Stream Processing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../demod/">
<span class="md-ellipsis">
    
  
    Demodulation and measurement
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../output_filter/">
<span class="md-ellipsis">
    
  
    Output filter
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../multi-users/">
<span class="md-ellipsis">
    
  
    Job queue and Multiple users
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../analog_input_stage/">
<span class="md-ellipsis">
    
  
    Analog input stage
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../error/">
<span class="md-ellipsis">
    
  
    Messages and Errors
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../external_trigger/">
<span class="md-ellipsis">
    
  
    External Triggering
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../external_clock/">
<span class="md-ellipsis">
    
  
    External Clock
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../Hardware/">
<span class="md-ellipsis">
    
  
    Hardware
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Hardware
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Hardware/OPX_hardware/">
<span class="md-ellipsis">
    
  
    OPX &amp; OPX+ Specification
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Hardware/opx%2Binstallation/">
<span class="md-ellipsis">
    
  
    OPX+ Installation Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Hardware/octave/">
<span class="md-ellipsis">
    
  
    Octave
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Hardware/dib/">
<span class="md-ellipsis">
    
  
    OPD - Operator Digital
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    API References
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    API References
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../API_references/qua/">
<span class="md-ellipsis">
    
  
    QUA Language API
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
            
  
    QUA Language API
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qua/dsl_main/">
<span class="md-ellipsis">
    
  
    QUA Statements Reference
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qua/result_stream/">
<span class="md-ellipsis">
    
  
    Result stream
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qua/math/">
<span class="md-ellipsis">
    
  
    Math functions
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qua/cast/">
<span class="md-ellipsis">
    
  
    Casting
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qua/util/">
<span class="md-ellipsis">
    
  
    Utility
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qua/random/">
<span class="md-ellipsis">
    
  
    Random numbers
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/config_spec/">
<span class="md-ellipsis">
    
  
    Configuration specification
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qm_api/">
<span class="md-ellipsis">
    
  
    Quantum Machine API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qm_manager_api/">
<span class="md-ellipsis">
    
  
    Quantum Machine Manager API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qm_job_api/">
<span class="md-ellipsis">
    
  
    QM Job API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/queue/">
<span class="md-ellipsis">
    
  
    QM Job Queue API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/results_api/">
<span class="md-ellipsis">
    
  
    Results API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/simulator_api/">
<span class="md-ellipsis">
    
  
    Simulator API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/qm_octave/">
<span class="md-ellipsis">
    
  
    QM Octave API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../API_references/octave_config/">
<span class="md-ellipsis">
    
  
    QM Octave Configuration API
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Releases
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Releases/qop1_releases/">
<span class="md-ellipsis">
    
  
    OPX (QOP 1) Releases
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Releases/qop2_releases/">
<span class="md-ellipsis">
    
  
    OPX+ (QOP 2) Releases
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Releases/qm_qua_releases/">
<span class="md-ellipsis">
    
  
    Python Package (qm-qua) Releases
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/">
<span class="md-ellipsis">
    
  
    Feedback and support
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Solutions repositories
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            
  
    Solutions repositories
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Libraries/libs_repository/">
<span class="md-ellipsis">
    
  
    QUA Libraries
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Libraries/tools_repository/">
<span class="md-ellipsis">
    
  
    QUA tools
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#measure-statement-features">
<span class="md-ellipsis">
      
        Measure statement features
      
    </span>
</a>
<nav aria-label="Measure statement features" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#demodulation">
<span class="md-ellipsis">
      
        Demodulation
      
    </span>
</a>
<nav aria-label="Demodulation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#full-demodulation">
<span class="md-ellipsis">
      
        Full demodulation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sliced-demodulation">
<span class="md-ellipsis">
      
        Sliced demodulation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#accumulated-demodulation">
<span class="md-ellipsis">
      
        Accumulated demodulation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#moving-window-demodulation">
<span class="md-ellipsis">
      
        Moving window demodulation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration">
<span class="md-ellipsis">
      
        Integration
      
    </span>
</a>
<nav aria-label="Integration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#full">
<span class="md-ellipsis">
      
        Full
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sliced">
<span class="md-ellipsis">
      
        Sliced
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#accumulated">
<span class="md-ellipsis">
      
        Accumulated
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#moving-window">
<span class="md-ellipsis">
      
        Moving window
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-tagging">
<span class="md-ellipsis">
      
        Time tagging
      
    </span>
</a>
<nav aria-label="Time tagging" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#time-tagging-parameters">
<span class="md-ellipsis">
      
        Time-tagging parameters
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#time-tagging-modes-usage">
<span class="md-ellipsis">
      
        Time-tagging modes &amp; usage
      
    </span>
</a>
<nav aria-label="Time-tagging modes &amp; usage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#basic-time-tagging">
<span class="md-ellipsis">
      
        Basic time-tagging
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#high-resolution-time-tagging">
<span class="md-ellipsis">
      
        High resolution time-tagging
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#flow-control">
<span class="md-ellipsis">
      
        Flow control
      
    </span>
</a>
<nav aria-label="Flow control" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#branching">
<span class="md-ellipsis">
      
        Branching
      
    </span>
</a>
<nav aria-label="Branching" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#if-elif-else">
<span class="md-ellipsis">
      
        If-Elif-Else
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#switch-case">
<span class="md-ellipsis">
      
        Switch-Case
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conditional-play">
<span class="md-ellipsis">
      
        Conditional Play
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ternary-operator">
<span class="md-ellipsis">
      
        Ternary Operator
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#loops">
<span class="md-ellipsis">
      
        Loops
      
    </span>
</a>
<nav aria-label="Loops" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#for">
<span class="md-ellipsis">
      
        For
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#for_each">
<span class="md-ellipsis">
      
        For_Each
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#while">
<span class="md-ellipsis">
      
        While
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pause-resume-and-io-variables">
<span class="md-ellipsis">
      
        Pause, Resume and IO variables
      
    </span>
</a>
<nav aria-label="Pause, Resume and IO variables" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#setting-an-io-variable">
<span class="md-ellipsis">
      
        Setting an IO variable
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reading-an-io-variable">
<span class="md-ellipsis">
      
        Reading an IO variable
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#relevant-apis">
<span class="md-ellipsis">
      
        Relevant APIs
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#input-streams">
<span class="md-ellipsis">
      
        Input streams
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sticky-element">
<span class="md-ellipsis">
      
        Sticky Element
      
    </span>
</a>
<nav aria-label="Sticky Element" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#voltage-easing">
<span class="md-ellipsis">
      
        Voltage easing
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ramp-pulse">
<span class="md-ellipsis">
      
        Ramp pulse
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#frequency-chirp">
<span class="md-ellipsis">
      
        Frequency chirp
      
    </span>
</a>
<nav aria-label="Frequency chirp" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#non-uniform-chirp-sections">
<span class="md-ellipsis">
      
        Non-uniform chirp sections
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mathematical-formulation-of-the-chirp">
<span class="md-ellipsis">
      
        Mathematical formulation of the chirp
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#continuous-chirp">
<span class="md-ellipsis">
      
        Continuous chirp
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#crosstalk-matrix">
<span class="md-ellipsis">
      
        Crosstalk Matrix
      
    </span>
</a>
<nav aria-label="Crosstalk Matrix" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-examples">
<span class="md-ellipsis">
      
        Usage Examples
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pulse-memory-compression">
<span class="md-ellipsis">
      
        Pulse Memory Compression
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-pulse-duration">
<span class="md-ellipsis">
      
        Dynamic pulse duration
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#truncate-pulses">
<span class="md-ellipsis">
      
        Truncate pulses
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dynamic-port-allocation">
<span class="md-ellipsis">
      
        Dynamic port allocation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multiple-inputs">
<span class="md-ellipsis">
      
        Multiple inputs
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analog-delay">
<span class="md-ellipsis">
      
        Analog Delay
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#threads">
<span class="md-ellipsis">
      
        Threads
      
    </span>
</a>
<nav aria-label="Threads" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#automatic-thread-allocation">
<span class="md-ellipsis">
      
        Automatic Thread Allocation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manual-thread-allocation">
<span class="md-ellipsis">
      
        Manual Thread Allocation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#oscillators">
<span class="md-ellipsis">
      
        Oscillators
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#precompile-jobs">
<span class="md-ellipsis">
      
        Precompile Jobs
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compilation-options">
<span class="md-ellipsis">
      
        Compilation options
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="qua-language-features">QUA Language Features<a class="headerlink" href="#qua-language-features" title="Permanent link">¶</a></h1>
<p>This document describes QUA language features that go beyond the simple use-case described in the QUA overview section.</p>
<p>For easier navigation we recommend using the table of contents to the left.</p>
<h2 id="measure-statement-features">Measure statement features<a class="headerlink" href="#measure-statement-features" title="Permanent link">¶</a></h2>
<p>The <a class="autorefs autorefs-internal" href="../../API_references/qua/dsl_main/#qm.qua._dsl.measure"><code>measure()</code></a> command is a central command in QUA. It allows for the acquisition of ADC data corresponding to a readout pulse, its storage and processing.
The raw ADC data can be processed in several ways, as explained below.</p>
<h3 id="demodulation">Demodulation<a class="headerlink" href="#demodulation" title="Permanent link">¶</a></h3>
<div class="arithmatex">\[
\text{demod}(b,e)=2^{-12}\sum_{i=b}^{e}\left(W_{c}^{i}\cos\left(2\pi f_{IF}t_{i}\right)+W_{s}^{i}\sin\left(2\pi f_{IF}t_{i}\right)\right)S_{i}
\]</div>
<p>where <span class="arithmatex">\(W^{4k+p}_{s,c}=\tilde{W}^{k}_{s,c} \forall p\in\{0,1,2,3\}\)</span></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <span class="arithmatex">\(2^{-12}\)</span> is a factor used to scale the result for the OPX fixed point accuracy</p>
</div>
<p>Types of demodulations:</p>
<h4 id="full-demodulation">Full demodulation<a class="headerlink" href="#full-demodulation" title="Permanent link">¶</a></h4>
<p>This is regular demodulation.</p>
<div class="arithmatex">\[
d_{full}=\text{demod}(0,n-1)
\]</div>
<p>where <span class="arithmatex">\(n\)</span> is the number of the total adc samples. The result is a fixed point value.</p>
<p>Syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>                <span class="n">demod</span><span class="o">.</span><span class="n">full</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],[</span><span class="n">output_variable</span><span class="p">],[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">demod</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="s2">"cos"</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">))</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">demod</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="s2">"cos"</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">),</span> <span class="n">demod</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="s2">"sin"</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">))</span>
</code></pre></div>
<h4 id="sliced-demodulation">Sliced demodulation<a class="headerlink" href="#sliced-demodulation" title="Permanent link">¶</a></h4>
<p>The demodulation is sliced into chunks according to the formula below. Save the result in an array.</p>
<div class="arithmatex">\[
d_{sliced}\left[i\right]=\text{demod}(i\cdot 4\cdot C,(i+1)\cdot 4\cdot C)
\]</div>
<p>where <span class="arithmatex">\(C\)</span> is the chunk size in units of 4 ns.</p>
<p>Illustration:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../sliced.png"><img alt="sliced" src="../sliced.png"/></a></p>
<p>Syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>        <span class="n">demod</span><span class="o">.</span><span class="n">sliced</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],[</span><span class="n">output_array</span><span class="p">],[</span><span class="n">chunk_size</span><span class="p">],[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">A</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="n">B</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="n">C</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>    <span class="n">demod</span><span class="o">.</span><span class="n">sliced</span><span class="p">(</span><span class="s2">"cos"</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">)</span>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="p">)</span>  <span class="c1"># The integration weights are, constant, of length 10*4*6 = 240</span>
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
<a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>    <span class="n">demod</span><span class="o">.</span><span class="n">sliced</span><span class="p">(</span><span class="s2">"arb_integW"</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">),</span>
<a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span class="n">demod</span><span class="o">.</span><span class="n">sliced</span><span class="p">(</span><span class="s2">"sin"</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">)</span>
<a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="p">)</span>  <span class="c1"># Integration weights are length 4*4*11 = 176</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol>
<li>chunk size is in units of 4ns.</li>
<li>For arbitrary integration weights, chunk size must be bigger than or equal to 7</li>
<li>Duration of integration weights must be 4 * <code>chunk_size</code> * <code>array_size</code></li>
</ol>
</div>
<h4 id="accumulated-demodulation">Accumulated demodulation<a class="headerlink" href="#accumulated-demodulation" title="Permanent link">¶</a></h4>
<div class="arithmatex">\[
d_{accumulated}\left[i\right]=\sum_{j=0}^{i}\text{demod}(j\cdot 4\cdot C,(j+1)\cdot 4\cdot C)
\]</div>
<p>where <span class="arithmatex">\(C\)</span> is the chunk size in units of 4 ns.</p>
<p>Illustration:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../accumulated.png"><img alt="accumulated" src="../accumulated.png"/></a></p>
<p>Syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>        <span class="n">demod</span><span class="o">.</span><span class="n">accumulated</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],[</span><span class="n">output_array</span><span class="p">],[</span><span class="n">chunk_size</span><span class="p">],[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">A</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="n">B</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="n">C</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">demod</span><span class="o">.</span><span class="n">accumulated</span><span class="p">(</span><span class="s2">"integW1"</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">))</span>
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>    <span class="n">demod</span><span class="o">.</span><span class="n">accumulated</span><span class="p">(</span><span class="s2">"arb_integW"</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">),</span>
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>    <span class="n">demod</span><span class="o">.</span><span class="n">accumulated</span><span class="p">(</span><span class="s2">"sin"</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">)</span>
<a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol>
<li>chunk size is in units of 4ns.</li>
<li>For arbitrary integration weights, chunk size must be bigger than or equal to 7</li>
<li>Duration of integration weights must be 4 * chunk_size * array_size</li>
</ol>
</div>
<h4 id="moving-window-demodulation">Moving window demodulation<a class="headerlink" href="#moving-window-demodulation" title="Permanent link">¶</a></h4>
<div class="arithmatex">\[
d_{movingWindow}\left[i\right]=\sum_{j=max(i-W+1,0)}^{i}\text{demod}(j\cdot 4\cdot C,(j+1)\cdot 4\cdot C)
\]</div>
<p>where <span class="arithmatex">\(C\)</span> is the chunk size in units of 4 ns and <span class="arithmatex">\(W\)</span> is the chunks_per_window.</p>
<p>Illustration:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../moving_window.png"><img alt="moving_window" src="../moving_window.png"/></a></p>
<p>Syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span> <span class="n">demod</span><span class="o">.</span><span class="n">moving_window</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],</span>
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>                                                          <span class="p">[</span><span class="n">output_array</span><span class="p">],</span>
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>                                                          <span class="p">[</span><span class="n">chunk_size</span><span class="p">],</span>
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>                                                          <span class="p">[</span><span class="n">chunks_per_window</span><span class="p">],</span>
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>                                                          <span class="p">[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">A</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="n">B</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="n">C</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">demod</span><span class="o">.</span><span class="n">moving_window</span><span class="p">(</span><span class="s2">"cos"</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">))</span>
<a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="n">measure</span><span class="p">(</span><span class="s2">"readout"</span><span class="p">,</span> <span class="s2">"RR"</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
<a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>                <span class="n">demod</span><span class="o">.</span><span class="n">moving_window</span><span class="p">(</span><span class="s2">"arb_integW"</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">),</span> <span class="n">demod</span><span class="o">.</span><span class="n">moving_window</span><span class="p">(</span><span class="s2">"sin"</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"out1"</span><span class="p">))</span>
</code></pre></div>
<p>!!! Note:</p>
<div class="highlight"><pre><span></span><code>1. chunk size is in units of 4ns.
2. For arbitrary integration weights, chunk size must be bigger than or equal to 7
3. Duration of integration weights must be 4 * chunk_size * array_size
4. Chunk size must be less or equal to array_size
</code></pre></div>
<h3 id="integration">Integration<a class="headerlink" href="#integration" title="Permanent link">¶</a></h3>
<p>The same as demodulation but at zero frequency, namely:</p>
<div class="arithmatex">\[
\text{Integ}(b,e)=2^{-12}\sum_{i=b}^{e}W_{c}^{i}S_{i}
\]</div>
<p>where <span class="arithmatex">\(W^{4k+p}_{c}=\tilde{W}^{k}_{c} \forall p\in\{0,1,2,3\}\)</span></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <span class="arithmatex">\(2^{-12}\)</span> is a factor used to scale the result for the OPX fixed point accuracy</p>
</div>
<p>Types of integrations:</p>
<h4 id="full">Full<a class="headerlink" href="#full" title="Permanent link">¶</a></h4>
<p>syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span>
<a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>                <span class="n">integration</span><span class="o">.</span><span class="n">full</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],[</span><span class="n">output_variable</span><span class="p">],[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<h4 id="sliced">Sliced<a class="headerlink" href="#sliced" title="Permanent link">¶</a></h4>
<p>Syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span>
<a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>                <span class="n">integration</span><span class="o">.</span><span class="n">sliced</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],[</span><span class="n">output_array</span><span class="p">],[</span><span class="n">chunk_size</span><span class="p">],[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<h4 id="accumulated">Accumulated<a class="headerlink" href="#accumulated" title="Permanent link">¶</a></h4>
<p>Syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span>
<a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>                <span class="n">integration</span><span class="o">.</span><span class="n">accumulated</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],[</span><span class="n">output_array</span><span class="p">],[</span><span class="n">chunk_size</span><span class="p">],[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<h4 id="moving-window">Moving window<a class="headerlink" href="#moving-window" title="Permanent link">¶</a></h4>
<p>Syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span>
<a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>                <span class="n">integration</span><span class="o">.</span><span class="n">moving_window</span><span class="p">([</span><span class="n">integration_weights</span><span class="p">],[</span><span class="n">output_array</span><span class="p">],[</span><span class="n">chunk_size</span><span class="p">],[</span><span class="n">chunks_per_window</span><span class="p">],[</span><span class="n">analog_output</span><span class="p">]),</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<h3 id="time-tagging">Time tagging<a class="headerlink" href="#time-tagging" title="Permanent link">¶</a></h3>
<p>The time-tagging feature populates a vector of time stamps that are associated with voltage edges typically generated by a single photon counting module (SPCM).</p>
<h4 id="time-tagging-parameters">Time-tagging parameters<a class="headerlink" href="#time-tagging-parameters" title="Permanent link">¶</a></h4>
<p>A time-tag is generated when the voltage in the OPX analog input meets two conditions, one for the signal and one for the signal's derivative.
The time tagger logic is as follows:</p>
<ul>
<li>A tag will be registered in the ADC sample where both conditions are met simultaneously.</li>
<li>As long as both conditions are true, no new tags are registered.</li>
<li>Once one of the conditions turns false, the tagger is "armed" again and a new tag can be registered.</li>
<li>The next tag will be registered in the next ADC sample, where both conditions are true again.</li>
</ul>
<p>The time tagging parameters are set in a measuring element configuration.</p>
<p>There are two conditions on the signal. One for the value and one for the derivative which are defined by the parameters
<code>signalThreshold</code> and <code>signalPolarity</code>, and follow the following equation:</p>
<p>For <code>signalPolarity</code> set to <code>'Above'</code>:</p>
<div class="arithmatex">\[
V(t) &gt; signalThreshold
\]</div>
<p>For <code>signalPolarity</code> set to <code>'Below'</code>:</p>
<div class="arithmatex">\[
V(t) &lt; signalThreshold
\]</div>
<p>Where <span class="arithmatex">\(V(t)\)</span> is the measured voltage at time <span class="arithmatex">\(t\)</span>. Similarly, the condition on the signal derivative follows the same logic:</p>
<p>For <code>derivativePolarity</code> set to <code>'Above'</code>:</p>
<div class="arithmatex">\[
\dot{V(t)} &gt; derivativeThreshold
\]</div>
<p>For <code>derivativePolarity</code> set to <code>'Below'</code>:</p>
<div class="arithmatex">\[
\dot{V(t)} &lt; derivativeThreshold
\]</div>
<p>For example, in the configuration block below, the element <code>spcm</code> has the time tagging parameters defined in the <code>outputPulseParameters</code> block.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="s1">'spcm'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>    <span class="s2">"singleInput"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a>        <span class="s2">"port"</span><span class="p">:</span> <span class="p">(</span><span class="s1">'con1'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a>    <span class="p">},</span>
<a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a>    <span class="s1">'operations'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a>        <span class="s1">'measure'</span><span class="p">:</span> <span class="s1">'measure_pulse'</span>
<a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a>    <span class="p">},</span>
<a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a>    <span class="s2">"outputs"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a>        <span class="s1">'out1'</span><span class="p">:</span> <span class="p">(</span><span class="s1">'con1'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a>    <span class="p">},</span>
<a href="#__codelineno-12-11" id="__codelineno-12-11" name="__codelineno-12-11"></a>    <span class="s1">'time_of_flight'</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span>
<a href="#__codelineno-12-12" id="__codelineno-12-12" name="__codelineno-12-12"></a>    <span class="s1">'smearing'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a href="#__codelineno-12-13" id="__codelineno-12-13" name="__codelineno-12-13"></a>    <span class="s1">'outputPulseParameters'</span><span class="p">:</span> <span class="p">{</span>   <span class="c1"># Time tagging parameters</span>
<a href="#__codelineno-12-14" id="__codelineno-12-14" name="__codelineno-12-14"></a>        <span class="s1">'signalThreshold'</span><span class="p">:</span> <span class="o">-</span><span class="mi">500</span><span class="p">,</span>
<a href="#__codelineno-12-15" id="__codelineno-12-15" name="__codelineno-12-15"></a>        <span class="s1">'signalPolarity'</span><span class="p">:</span> <span class="s1">'Below'</span><span class="p">,</span>
<a href="#__codelineno-12-16" id="__codelineno-12-16" name="__codelineno-12-16"></a>        <span class="s1">'derivativeThreshold'</span><span class="p">:</span> <span class="o">-</span><span class="mi">2048</span><span class="p">,</span>
<a href="#__codelineno-12-17" id="__codelineno-12-17" name="__codelineno-12-17"></a>        <span class="s1">'derivativePolarity'</span><span class="p">:</span> <span class="s1">'Above'</span>
<a href="#__codelineno-12-18" id="__codelineno-12-18" name="__codelineno-12-18"></a>    <span class="p">}</span>
<a href="#__codelineno-12-19" id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="p">},</span>
</code></pre></div>
<p>Note that the condition on the derivative is chosen such that it will always be <strong>true</strong>. In that way,
a time tag will be registered upon crossing the signal's threshold.</p>
<p>The example above showcases a common usage of the time tagger as a voltage edge detector which would detect a falling
edge through <span class="arithmatex">\(~244 mV\)</span> (<span class="arithmatex">\(-500/2048=-0.244\)</span>).</p>
<p>For a gaussian input as shown below, the parameters above would detect the falling edge at <span class="arithmatex">\(t=210 ns\)</span>.
If the <code>signalPolarity</code> would be changed to <code>Above</code>, the rising edge would be detected at <span class="arithmatex">\(t=270 ns\)</span>.</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../timetagging_example.png"><img alt="timetagging edge detector example" src="../timetagging_example.png"/></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For most use-cases, we recommend setting the the <code>derivativeThreshold</code> and <code>derivativePolarity</code> as in the example above.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to backwards compatibility, the parameter's values can also be <code>Ascending</code> for <code>Above</code> and  <code>Descending</code> for <code>Below</code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <code>'outputPulseParameters'</code> dictionary is left empty, the default values are used.
The user must supply <strong>all</strong> values, or none. The default values are as follows:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="s1">'outputPulseParameters'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>    <span class="s1">'signalThreshold'</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span>
<a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>    <span class="s1">'signalPolarity'</span><span class="p">:</span> <span class="s1">'Below'</span><span class="p">,</span>
<a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>    <span class="s1">'derivativeThreshold'</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
<a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>    <span class="s1">'derivativePolarity'</span><span class="p">:</span> <span class="s1">'Below'</span>
<a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="p">}</span>
</code></pre></div>
</div>
<h4 id="time-tagging-modes-usage">Time-tagging modes &amp; usage<a class="headerlink" href="#time-tagging-modes-usage" title="Permanent link">¶</a></h4>
<h5 id="basic-time-tagging">Basic time-tagging<a class="headerlink" href="#basic-time-tagging" title="Permanent link">¶</a></h5>
<p>Basic time tagging has a resolution of 1ns with a dead time of 2ns.
Time-tagging is done in a measure statement, with the following syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="n">counts</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="n">times</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span> <span class="n">time_tagging</span><span class="o">.</span><span class="n">analog</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="p">[</span><span class="n">duration</span><span class="p">],</span> <span class="n">counts</span><span class="p">)</span>
</code></pre></div>
<ul>
<li><code>times</code> is a vector of integers into which the times of the detected pulses are saved (in ns).</li>
<li><code>max_time</code> gives the maximum time window, in ns, during which the statement waits for tag arrival.</li>
<li><code>counts</code> is a variable that is populated with the number of tags which arrived during the measurement.</li>
</ul>
<h5 id="high-resolution-time-tagging">High resolution time-tagging<a class="headerlink" href="#high-resolution-time-tagging" title="Permanent link">¶</a></h5>
<p><a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2.0-blue"/></a> <a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QUA" class="middle" src="https://img.shields.io/badge/QUA-0.3.7-green"/></a>
High resolution time tagging has a resolution \&lt;50ps with a dead time of 84ns.
Time-tagging is done in a measure statement, with the following syntax:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="n">counts</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="n">times</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="n">measure</span><span class="p">([</span><span class="n">pulse</span><span class="p">],</span> <span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="p">[</span><span class="n">stream</span><span class="p">],</span> <span class="n">time_tagging</span><span class="o">.</span><span class="n">high_res</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="p">[</span><span class="n">duration</span><span class="p">],</span> <span class="n">counts</span><span class="p">)</span>
</code></pre></div>
<ul>
<li><code>times</code> is a vector of integers into which the times of the detected pulses are saved (in ps).</li>
<li><code>max_time</code> gives the maximum time window, in ns, during which the statement waits for tag arrival.</li>
<li><code>counts</code> is a variable that is populated with the number of tags which arrived during the measurement.</li>
</ul>
<h2 id="flow-control">Flow control<a class="headerlink" href="#flow-control" title="Permanent link">¶</a></h2>
<h3 id="branching">Branching<a class="headerlink" href="#branching" title="Permanent link">¶</a></h3>
<h4 id="if-elif-else">If-Elif-Else<a class="headerlink" href="#if-elif-else" title="Permanent link">¶</a></h4>
<p>The simplest way to use branching is using the <code>if_</code> statement. Usage of the <code>if_</code> conditional is demonstrated in the
code block below. Here, <code>op1</code> is played if <code>a</code> is larger than 1, <code>op2</code> is played if it's between -1 and 1, and
<code>op3</code> is played if it is below -1.
<code>a</code> is a <code>fixed</code> QUA variable in this case, which can be the result of a measurement or a classical computation.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">with</span> <span class="n">if_</span><span class="p">(</span><span class="n">a</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'op1'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="k">with</span> <span class="n">if_</span><span class="p">(</span><span class="n">a</span><span class="o">&gt;=-</span><span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'op2'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="k">with</span> <span class="n">else_</span><span class="p">():</span>
<a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'op3'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
</code></pre></div>
<h4 id="switch-case">Switch-Case<a class="headerlink" href="#switch-case" title="Permanent link">¶</a></h4>
<p>It is also possible to use a switch-case, as shown in the example below. Here, <code>op1</code> will be played if <code>a=1</code>,
<code>op2</code> will be played if <code>a=2</code>, and <code>default_op</code> will be played otherwise.
<code>a</code> is an <code>int</code> QUA variable in this case, which can be the result of a measurement or a classical computation.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">with</span> <span class="n">switch_</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
<a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>    <span class="k">with</span> <span class="n">case_</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>        <span class="n">play</span><span class="p">(</span><span class="s1">'op1'</span><span class="p">,</span><span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>    <span class="k">with</span> <span class="n">case_</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
<a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>        <span class="n">play</span><span class="p">(</span><span class="s1">'op2'</span><span class="p">,</span><span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a>    <span class="k">with</span> <span class="n">default_</span><span class="p">():</span>
<a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a>        <span class="n">play</span><span class="p">(</span><span class="s1">'default_op'</span><span class="p">,</span><span class="s1">'qe'</span><span class="p">)</span>
</code></pre></div>
<p>In the example below, the switch case is inside a QUA <code>for_</code> loop, which means that at each iteration of the loop, a
different operation will be played.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">with</span> <span class="n">for_</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>    <span class="o">...</span>
<a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>    <span class="k">with</span> <span class="n">switch_</span><span class="p">(</span><span class="n">j</span><span class="p">):</span>
<a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>        <span class="k">with</span> <span class="n">case_</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a>            <span class="n">play</span><span class="p">(</span><span class="s1">'op1'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a>        <span class="k">with</span> <span class="n">case_</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
<a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a>            <span class="n">play</span><span class="p">(</span><span class="s1">'op2'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a>        <span class="k">with</span> <span class="n">case_</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a>            <span class="n">play</span><span class="p">(</span><span class="s1">'op3'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>        <span class="o">...</span>
<a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a>    <span class="o">...</span>
</code></pre></div>
<p>This can be further simplified by wrapping the code with a Python <code>for</code> loop:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">with</span> <span class="n">for_</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>    <span class="o">...</span>
<a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>    <span class="k">with</span> <span class="n">switch_</span><span class="p">(</span><span class="n">j</span><span class="p">):</span>
<a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span>
<a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a>            <span class="k">with</span> <span class="n">case_</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>                <span class="n">play</span><span class="p">(</span><span class="sa">f</span><span class="s1">'op</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a>    <span class="o">...</span>
</code></pre></div>
<p>There is an optional flag, <code>unsafe</code> that can be used to decrease the gaps that might be created when using switch-case
inside a loop, such as in the example above. However, this flag cannot be used with <code>with default_():</code>, and in
addition, if a value in the <code>switch</code> does not match any of the values in the <code>case</code>, unexpected behavior can occur.</p>
<p>The usage can be seen in the following example:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="k">with</span> <span class="n">for_</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>    <span class="o">...</span>
<a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a>    <span class="k">with</span> <span class="n">switch_</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">unsafe</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span>
<a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>            <span class="k">with</span> <span class="n">case_</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a>                <span class="n">play</span><span class="p">(</span><span class="sa">f</span><span class="s1">'op</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a>    <span class="o">...</span>
</code></pre></div>
<h4 id="conditional-play">Conditional Play<a class="headerlink" href="#conditional-play" title="Permanent link">¶</a></h4>
<p>It is also possible to add a condition directly in the <code>play</code> command. The pulse would only be played if the condition
is evaluated to <code>True</code>. This would result in a quicker evaluation of the condition, compared to using an <code>if_</code>, and
should be used when feedback latency is critical.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">play</span><span class="p">(</span><span class="s1">'op'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there is a digital pulse associated with the operation, it will always be played, regardless of the condition.</p>
</div>
<h4 id="ternary-operator">Ternary Operator<a class="headerlink" href="#ternary-operator" title="Permanent link">¶</a></h4>
<p>The ternary operation can be used to quickly evaluate a condition to decide between two parameters, this would result in
a quicker evaluation of the condition, compared to using an <code>if_</code>. In the example below, the duration of the pulse will
be <code>c</code> if <code>a &gt; 0</code> otherwise it would be <code>d</code>. <code>c</code> and <code>d</code> can be either QUA variables, or constants.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">assign</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">Util</span><span class="o">.</span><span class="n">cond</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="n">play</span><span class="p">(</span><span class="s1">'op'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">Util</span><span class="o">.</span><span class="n">cond</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
</code></pre></div>
<h3 id="loops">Loops<a class="headerlink" href="#loops" title="Permanent link">¶</a></h3>
<h4 id="for">For<a class="headerlink" href="#for" title="Permanent link">¶</a></h4>
<p>The QUA <code>for_</code> loop is similar to a python loop, having a <code>(var, start, end_cond, step)</code> structure.
The following block of code plays a pulse five times, running over a QUA variable <code>t</code>, and uses it for the pulse
duration.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="n">t</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="k">with</span> <span class="n">for_</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">,</span> <span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
</code></pre></div>
<h4 id="for_each">For_Each<a class="headerlink" href="#for_each" title="Permanent link">¶</a></h4>
<p>The QUA <code>for_each_</code> loop scans the variable through a predefined vector. This is a bit less efficient compared to the
<code>for_</code> loop above, but can scan arbitrary points.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">t_vec</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="n">t</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="k">with</span> <span class="n">for_each_</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">t_vec</span><span class="p">):</span>
<a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
</code></pre></div>
<p>It is possible to loop over a tuple of variables, similar to the <code>zip</code> style iteration in python:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">t_vec</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="n">a_vec</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="n">t</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="n">a</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">)</span>
<a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="k">with</span> <span class="n">for_each_</span><span class="p">((</span><span class="n">t</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span> <span class="p">(</span><span class="n">t_vec</span><span class="p">,</span> <span class="n">a_vec</span><span class="p">)):</span>
<a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span> <span class="o">*</span> <span class="n">amp</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s1">'qe'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
</code></pre></div>
<p>In both cases, 't_vec' and 'a_vec' can also be QUA arrays</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>for_each_</code> loops are more resource intensive and unlike <code>for_</code> loops, have a maximum size.</p>
</div>
<h4 id="while">While<a class="headerlink" href="#while" title="Permanent link">¶</a></h4>
<p>The <code>while</code> loop is executed for as long as the condition is <code>True</code>. The following block of code plays a pulse 5 times.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="n">N</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">with</span> <span class="n">while_</span><span class="p">(</span><span class="n">N</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">):</span>
<a href="#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span><span class="s1">'qe'</span><span class="p">)</span>
<a href="#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a>    <span class="n">assign</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">N</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h2 id="pause-resume-and-io-variables">Pause, Resume and IO variables<a class="headerlink" href="#pause-resume-and-io-variables" title="Permanent link">¶</a></h2>
<p>QUA programs can be paused by using the <code>pause</code> QUA command. When a <code>pause</code> command is reached, the OPX completely halts
the execution of the program until a <code>resume</code> command is sent using the QM <code>Job</code> API.
This could be used to control an external device, such as an LO source. When the program is paused, data
can be sent between the client PC and the real-time program using 2 available IO variables (Input/Output variables).</p>
<p>The following examples shows basic communications between the client and QUA program using this <code>pause</code> and <code>resume</code>
technique.</p>
<h3 id="setting-an-io-variable">Setting an IO variable<a class="headerlink" href="#setting-an-io-variable" title="Permanent link">¶</a></h3>
<p>In this QUA program, a <code>pause</code> precedes the <code>play</code> command, which plays a pulse with an amplitude dynamically set by an IO variable.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>    <span class="n">N</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a>    <span class="n">a</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">)</span>
<a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a>    <span class="k">with</span> <span class="n">for_</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">N</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">,</span> <span class="n">N</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a>        <span class="n">pause</span><span class="p">()</span>
<a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a>        <span class="n">assign</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">IO1</span><span class="p">)</span>
<a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a>        <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="o">*</span><span class="n">amp</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s1">'qe'</span><span class="p">)</span>
</code></pre></div>
<p>When the <code>pause</code> command is encountered, the execution waits for a <code>resume</code> command, with usage as shown below:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="n">job</span> <span class="o">=</span> <span class="n">qm</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">prog</span><span class="p">)</span>
<a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="n">current_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1e-3</span><span class="p">,</span> <span class="mf">5e-3</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">current_vals</span><span class="p">:</span>
<a href="#__codelineno-28-4" id="__codelineno-28-4" name="__codelineno-28-4"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="n">job</span><span class="o">.</span><span class="n">is_paused</span><span class="p">():</span>
<a href="#__codelineno-28-5" id="__codelineno-28-5" name="__codelineno-28-5"></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
<a href="#__codelineno-28-6" id="__codelineno-28-6" name="__codelineno-28-6"></a>    <span class="n">qm</span><span class="o">.</span><span class="n">set_io1</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<a href="#__codelineno-28-7" id="__codelineno-28-7" name="__codelineno-28-7"></a>    <span class="n">job</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
</code></pre></div>
<h3 id="reading-an-io-variable">Reading an IO variable<a class="headerlink" href="#reading-an-io-variable" title="Permanent link">¶</a></h3>
<p>IO values can also be used to extract information of a running program. For example, update to the LO frequency to some value calculated in real-time, in the OPX.
The following example demonstrate such use case with an IO variable:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a>    <span class="n">rt_lo</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">)</span>
<a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>    <span class="o">...</span> <span class="c1"># 1st part of the program including calculation for rt_lo</span>
<a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a>    <span class="n">assign</span><span class="p">(</span><span class="n">IO2</span><span class="p">,</span> <span class="n">rt_lo</span><span class="p">)</span>
<a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a>    <span class="n">pause</span><span class="p">()</span>
<a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a>    <span class="o">...</span> <span class="c1"># 2nd part of the program</span>
</code></pre></div>
<p>In Python we can have a code block that iteratively checks the IO value and act upon that, for example:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="n">job</span> <span class="o">=</span> <span class="n">qm</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">prog</span><span class="p">)</span>
<a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">while</span> <span class="ow">not</span> <span class="n">job</span><span class="o">.</span><span class="n">is_paused</span><span class="p">():</span>
<a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
<a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="n">LO</span> <span class="o">=</span> <span class="n">get_io2_value</span><span class="p">()</span>
<a href="#__codelineno-30-5" id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="c1"># do something with new LO</span>
<a href="#__codelineno-30-6" id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="n">job</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
</code></pre></div>
<h3 id="relevant-apis">Relevant APIs<a class="headerlink" href="#relevant-apis" title="Permanent link">¶</a></h3>
<p>See the following APIs for using IO variables:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../../API_references/qm_api/#qm.QuantumMachine.QuantumMachine.set_io1_value"><code>set_io1_value()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../API_references/qm_api/#qm.QuantumMachine.QuantumMachine.set_io2_value"><code>set_io2_value()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../API_references/qm_api/#qm.QuantumMachine.QuantumMachine.set_io_values"><code>set_io_values()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../API_references/qm_api/#qm.QuantumMachine.QuantumMachine.get_io1_value"><code>get_io1_value()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../API_references/qm_api/#qm.QuantumMachine.QuantumMachine.get_io2_value"><code>get_io2_value()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../API_references/qm_api/#qm.QuantumMachine.QuantumMachine.get_io_values"><code>get_io_values()</code></a></li>
</ul>
<h2 id="input-streams">Input streams<a class="headerlink" href="#input-streams" title="Permanent link">¶</a></h2>
<p><a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2-blue"/></a> <a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QUA" class="middle" src="https://img.shields.io/badge/QUA-0.3.7-green"/></a> Input streams allows passing data from the client computer to a running job in the OPX+ with
minimal latency. To use one, you must first declare it in the QUA program using the
[qm.qua._dsl.declare_input_stream[] command. The declaration is similar to the declaration of a normal QUA
variable. You need to define its type (int, fixed, bool) it's name, and optionality, its size or values.
Once declared, you can use it as you would use any other QUA variable, with the exception that you have two new
available commands:</p>
<ol>
<li>Outside the QUA program, in Python, you can use <a class="autorefs autorefs-internal" href="../../API_references/qm_job_api/#qm.jobs.base_job.QmBaseJob.insert_input_stream"><code>insert_input_stream()</code></a> from the job API to pass
   data into the QUA program. Note that you can pass multiple values and later access them one by one in QUA.</li>
<li>Inside the QUA program, you can use <a class="autorefs autorefs-internal" href="../../API_references/qua/dsl_main/#qm.qua._dsl.advance_input_stream"><code>advance_input_stream()</code></a> function to access the next available
   data. If there is no available data, this command will pause the OPX and wait until data is available.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data inserted using <a class="autorefs autorefs-internal" href="../../API_references/qm_job_api/#qm.jobs.base_job.QmBaseJob.insert_input_stream"><code>insert_input_stream()</code></a> must match the size of the input stream.</p>
</div>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">example_input_stream</span><span class="p">:</span>
<a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a>    <span class="n">truth_table</span> <span class="o">=</span> <span class="n">declare_input_stream</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'truth_table_input_stream'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a>    <span class="n">tau</span> <span class="o">=</span> <span class="n">declare_input_stream</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'tau_input_stream'</span><span class="p">)</span>
<a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a>    <span class="o">...</span>
<a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a>    <span class="k">with</span> <span class="n">while_</span><span class="p">(</span><span class="n">some_qua_cond</span><span class="p">):</span>
<a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a>        <span class="n">advance_input_stream</span><span class="p">(</span><span class="n">tau</span><span class="p">)</span>
<a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a>        <span class="n">advance_input_stream</span><span class="p">(</span><span class="n">truth_table</span><span class="p">)</span>
<a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a>        <span class="n">play</span><span class="p">(</span><span class="s1">'operation'</span><span class="p">,</span> <span class="s1">'element0'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">tau</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="n">truth_table</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a href="#__codelineno-31-9" id="__codelineno-31-9" name="__codelineno-31-9"></a>        <span class="n">play</span><span class="p">(</span><span class="s1">'operation'</span><span class="p">,</span> <span class="s1">'element1'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">tau</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="n">truth_table</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a href="#__codelineno-31-10" id="__codelineno-31-10" name="__codelineno-31-10"></a>        <span class="n">play</span><span class="p">(</span><span class="s1">'operation'</span><span class="p">,</span> <span class="s1">'element2'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">tau</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="n">truth_table</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<a href="#__codelineno-31-11" id="__codelineno-31-11" name="__codelineno-31-11"></a>        <span class="o">...</span>
<a href="#__codelineno-31-12" id="__codelineno-31-12" name="__codelineno-31-12"></a>    <span class="o">...</span>
<a href="#__codelineno-31-13" id="__codelineno-31-13" name="__codelineno-31-13"></a>
<a href="#__codelineno-31-14" id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="o">...</span>
<a href="#__codelineno-31-15" id="__codelineno-31-15" name="__codelineno-31-15"></a><span class="n">job</span> <span class="o">=</span> <span class="n">qm</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">example_input_stream</span><span class="p">)</span>
<a href="#__codelineno-31-16" id="__codelineno-31-16" name="__codelineno-31-16"></a><span class="o">...</span>
<a href="#__codelineno-31-17" id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="k">while</span> <span class="n">some_cond</span><span class="p">:</span>
<a href="#__codelineno-31-18" id="__codelineno-31-18" name="__codelineno-31-18"></a>    <span class="n">qubit_states</span> <span class="o">=</span> <span class="n">read_from_external_device</span><span class="p">()</span>
<a href="#__codelineno-31-19" id="__codelineno-31-19" name="__codelineno-31-19"></a>    <span class="n">calc_tau</span> <span class="o">=</span> <span class="n">calculate_tau</span><span class="p">()</span>
<a href="#__codelineno-31-20" id="__codelineno-31-20" name="__codelineno-31-20"></a>    <span class="n">job</span><span class="o">.</span><span class="n">insert_input_stream</span><span class="p">(</span><span class="s1">'truth_table_input_stream'</span><span class="p">,</span> <span class="n">qubit_states</span><span class="p">)</span>
<a href="#__codelineno-31-21" id="__codelineno-31-21" name="__codelineno-31-21"></a>    <span class="n">job</span><span class="o">.</span><span class="n">insert_input_stream</span><span class="p">(</span><span class="s1">'tau_input_stream'</span><span class="p">,</span> <span class="n">calc_tau</span><span class="p">)</span>
</code></pre></div>
<h2 id="sticky-element">Sticky Element<a class="headerlink" href="#sticky-element" title="Permanent link">¶</a></h2>
<p>A quantum element can be defined as <em>sticky</em> by adding the <code>hold_offset</code> key to its configuration.
Once defined in this way, the last value played at the end of a pulse will be held until the next pulse begins.
Then the values of the currently playing pulse will be <strong>added</strong> to the previously held value.
A sticky element always ramps back to its DC offset value when the element has reached its final instruction of the program.
This ramp can also be explicitly initiated by the <code>ramp_to_zero</code> function.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The amplitude of sticky pulses is accumulated with a resolution of 16 bit.
Therefore, <em>N</em> changes to the sticky pulse amplitude can result in an amplitude inaccuracy of about <span class="arithmatex">\(N \cdot 2^{-16}\)</span>.
To null out this accumulated error, it is recommended to use <a class="autorefs autorefs-internal" href="../../API_references/qua/dsl_main/#qm.qua._dsl.ramp_to_zero"><code>ramp_to_zero()</code></a> from time to time.</p>
<p>Alternatively, defining the amplitude of pulses of sticky elements to be in 16-bit resolution will prevent accumulated errors.
When using <code>*amp()</code>, the last waveform sample multiplied by the scale factor should be in 16-bit resolution.</p>
<p>An easy way to round in QUA would be to use <a href="../Guides/qua_ref.md/#bitwise-operations">bit-shifting</a></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="n">a</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">)</span>
<a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="n">assign</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;&gt;</span> <span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">)</span>  <span class="c1"># after this line, a will be rounded to 16-bit</span>
</code></pre></div>
</div>
<p>The sticky element behavior is simply shown in the following example.
We first define the quantum element as follows:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="s2">"qe1"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a>    <span class="s2">"singleInput"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a>        <span class="s2">"port"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"con1"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="#__codelineno-33-4" id="__codelineno-33-4" name="__codelineno-33-4"></a>    <span class="p">},</span>
<a href="#__codelineno-33-5" id="__codelineno-33-5" name="__codelineno-33-5"></a>    <span class="s1">'intermediate_frequency'</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a href="#__codelineno-33-6" id="__codelineno-33-6" name="__codelineno-33-6"></a>    <span class="s1">'hold_offset'</span><span class="p">:{</span><span class="s1">'duration'</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
<a href="#__codelineno-33-7" id="__codelineno-33-7" name="__codelineno-33-7"></a>    <span class="s1">'operations'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-33-8" id="__codelineno-33-8" name="__codelineno-33-8"></a>        <span class="s1">'pulse'</span><span class="p">:</span> <span class="s2">"pulse"</span><span class="p">,</span>
<a href="#__codelineno-33-9" id="__codelineno-33-9" name="__codelineno-33-9"></a>    <span class="p">},</span>
<a href="#__codelineno-33-10" id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="p">},</span>
<a href="#__codelineno-33-11" id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="s2">"qe2"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-33-12" id="__codelineno-33-12" name="__codelineno-33-12"></a>    <span class="s2">"singleInput"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-33-13" id="__codelineno-33-13" name="__codelineno-33-13"></a>        <span class="s2">"port"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"con1"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="#__codelineno-33-14" id="__codelineno-33-14" name="__codelineno-33-14"></a>    <span class="p">},</span>
<a href="#__codelineno-33-15" id="__codelineno-33-15" name="__codelineno-33-15"></a>    <span class="s1">'intermediate_frequency'</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<a href="#__codelineno-33-16" id="__codelineno-33-16" name="__codelineno-33-16"></a>    <span class="s1">'operations'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-33-17" id="__codelineno-33-17" name="__codelineno-33-17"></a>        <span class="s1">'pulse'</span><span class="p">:</span> <span class="s2">"pulse"</span><span class="p">,</span>
<a href="#__codelineno-33-18" id="__codelineno-33-18" name="__codelineno-33-18"></a>    <span class="p">},</span>
<a href="#__codelineno-33-19" id="__codelineno-33-19" name="__codelineno-33-19"></a><span class="p">}</span>
</code></pre></div>
<p>Note the <code>{'duration': 200}</code> which sets the ramp to zero duration, in clock cycles.
We also define a second quantum element <code>qe2</code> which is not sticky.</p>
<p>We can then run a simple program playing the same constant pulse twice, for the two different quantum elements:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span><span class="s1">'qe1'</span><span class="p">)</span>
<a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a>    <span class="n">wait</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="s1">'qe1'</span><span class="p">)</span>
<a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span><span class="s1">'qe1'</span><span class="p">)</span>
<a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a>    <span class="n">wait</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="s1">'qe2'</span><span class="p">)</span>
<a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span><span class="s1">'qe2'</span><span class="p">)</span>
<a href="#__codelineno-34-7" id="__codelineno-34-7" name="__codelineno-34-7"></a>    <span class="n">wait</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="s1">'qe2'</span><span class="p">)</span>
<a href="#__codelineno-34-8" id="__codelineno-34-8" name="__codelineno-34-8"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span><span class="s1">'qe2'</span><span class="p">)</span>
</code></pre></div>
<p>The resulting pulse sequence is shown below, where the sticky element is in blue and the non-sticky element is in orange.</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../ramp_to_zero.png"><img alt="ramp to zero example" src="../ramp_to_zero.png"/></a></p>
<p>The duration of each pulse is 1000 samples, with the sticky element in blue maintaining its final value between its first
and second play commands. Furthermore, the second pulse on the sticky element is added to the last pulse sample.
At the end of the program, the blue trace is ramped to zero within 200 clock cycles, as defined in the configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The example above is for an element without an intermediate frequency. In case of an element with an intermediate
frequency, the output will be a sine wave with the last amplitude.</p>
</div>
<h3 id="voltage-easing">Voltage easing<a class="headerlink" href="#voltage-easing" title="Permanent link">¶</a></h3>
<p>A ramp to zero can be initiated on a sticky pulse at any point by calling the <code>ramp_to_zero(qe,duration)</code> function.
The duration parameter is optional and can be used to override the configuration value.
The waveform below was generated by running this program:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span><span class="s1">'qe1'</span><span class="p">)</span>
<a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a>    <span class="n">ramp_to_zero</span><span class="p">(</span><span class="s1">'qe1'</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span><span class="s1">'qe1'</span><span class="p">)</span>
</code></pre></div>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../ramp_to_zero_2.png"><img alt="ramp to zero 2 example" src="../ramp_to_zero_2.png"/></a></p>
<p>Note the first pulse eases to zero at a double rate compared to the second one.</p>
<h2 id="ramp-pulse">Ramp pulse<a class="headerlink" href="#ramp-pulse" title="Permanent link">¶</a></h2>
<p>It's possible to generate a voltage ramp by using the <code>ramp(slope)</code> command.
The <code>slope</code> argument is specified in units of <code>V/ns</code>. Usage of this feature is as follows:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="n">play</span><span class="p">(</span><span class="n">ramp</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">),</span><span class="s1">'qe1'</span><span class="p">,</span><span class="n">duration</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pulse duration must be specified if the ramp feature is used.</p>
</div>
<p>The <code>slope</code> can either be a literal (as shown above) or a QUA variable or expression. For example, consider the following snippet.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="n">d</span><span class="o">=</span><span class="mi">1000</span>
<a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="n">max_v</span><span class="o">=</span><span class="mf">0.35</span>
<a href="#__codelineno-37-3" id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="n">n</span><span class="o">=</span><span class="mi">1000</span>
<a href="#__codelineno-37-4" id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">myFirstProgram</span><span class="p">:</span>
<a href="#__codelineno-37-5" id="__codelineno-37-5" name="__codelineno-37-5"></a>    <span class="n">a</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">)</span>
<a href="#__codelineno-37-6" id="__codelineno-37-6" name="__codelineno-37-6"></a>    <span class="k">with</span> <span class="n">for_</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">max_v</span><span class="o">/</span><span class="n">d</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="n">a</span> <span class="o">&lt;=</span> <span class="n">max_v</span><span class="o">/</span><span class="n">d</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span><span class="n">max_v</span><span class="o">/</span><span class="n">d</span><span class="o">/</span><span class="n">n</span><span class="p">):</span>
<a href="#__codelineno-37-7" id="__codelineno-37-7" name="__codelineno-37-7"></a>        <span class="n">play</span><span class="p">(</span><span class="n">ramp</span><span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="s1">'qe1'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
<a href="#__codelineno-37-8" id="__codelineno-37-8" name="__codelineno-37-8"></a>        <span class="n">play</span><span class="p">(</span><span class="n">ramp</span><span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="s1">'qe1'</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
</code></pre></div>
<p>The quantum element <code>qe1</code> is defined as a sticky pulse and the resulting waveform is therefore triangular in each loop step as is shown in the image below.</p>
<p>!!<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../ramp_pulse.png"><img alt="ramp_pulse" src="../ramp_pulse.png"/></a></p>
<h2 id="frequency-chirp">Frequency chirp<a class="headerlink" href="#frequency-chirp" title="Permanent link">¶</a></h2>
<p>This feature allows to perform a linear sweep of the element's intermediate frequency in time. Chirp parameters can be updated in run-time, inside a QUA program.</p>
<p>Basic usage of this feature is performed as follows:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a>play('pulse', 'qe', chirp=(rate, units))
</code></pre></div>
<p>Because the supported chirp rate spans many orders of magnitude, from mHz/sec to GHz/sec, it is defined by both a <code>rate</code>
numeric variable and a <code>units</code> string. Supported units are (exactly) one of the following: 'Hz/nsec', 'mHz/nsec', 'uHz/nsec',
'pHz/nsec' or their equivalent rates per-second: 'GHz/sec', 'MHz/sec', 'KHz/sec', 'Hz/sec', 'mHz/sec'. The rate itself is an integer,
which can either be a QUA variable or a python literal.</p>
<p>A spectrogram of a positive chirp rate followed by a negative rate is shown below. The chirp duration is defined by the duration of the used pulse.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a>with program() as prog:
<a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a>    chirp_rate = declare(int, value=25000)
<a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a>    play("pulse", "qe", chirp=(chirp_rate , 'Hz/nsec'))
<a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a>    play("pulse", "qe", chirp=(-25000, 'Hz/nsec'))
</code></pre></div>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../chirp_up_down.png"><img alt="chirp_up_down" src="../chirp_up_down.png"/></a></p>
<p>It is possible to directly define a piecewise linear chirp by providing a list of rates as shown below. This is a convenient method to approximate non-linear chirp rates.
In this case each chirp section will have the same duration, equal to the total pulse duration divided by the number of sections.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a>with program() as prog:
<a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a>    a = declare(int, value=[25000, 0, 50000, -30000, 80000])
<a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a>    play("pulse", "qe", chirp=(a, 'Hz/nsec'))
<a href="#__codelineno-40-4" id="__codelineno-40-4" name="__codelineno-40-4"></a># equivalent program:
<a href="#__codelineno-40-5" id="__codelineno-40-5" name="__codelineno-40-5"></a>with program() as prog:
<a href="#__codelineno-40-6" id="__codelineno-40-6" name="__codelineno-40-6"></a>    play("pulse", "qe", chirp=([25000, 0, 50000, -30000, 80000], 'Hz/nsec'))
</code></pre></div>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../chirp_piecewise.png"><img alt="chirp_piecewise" src="../chirp_piecewise.png"/></a></p>
<h3 id="non-uniform-chirp-sections">Non-uniform chirp sections<a class="headerlink" href="#non-uniform-chirp-sections" title="Permanent link">¶</a></h3>
<p>A list of linear chirp rates can be specified at uniform intervals in time as shown above. You can also have non-uniform sections by passing a second list, giving the clock cycle number
where the next chirp rate is set to start. This is shown in the example below:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="n">rates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">199</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="o">-</span><span class="mi">997</span><span class="p">,</span> <span class="mi">1396</span><span class="p">]</span>
<a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="n">times</span> <span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15196</span><span class="p">,</span> <span class="mi">25397</span><span class="p">,</span> <span class="mi">56925</span><span class="p">]</span>
<a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span> <span class="s1">'qe'</span><span class="p">,</span> <span class="n">chirp</span><span class="o">=</span><span class="p">(</span><span class="n">rates</span><span class="p">,</span><span class="n">times</span><span class="p">,</span> <span class="s1">'Hz/nsec'</span><span class="p">))</span>
</code></pre></div>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../chirp_piecewise_nonuniform.png"><img alt="chirp_piecewise_nonuniform" src="../chirp_piecewise_nonuniform.png"/></a></p>
<h3 id="mathematical-formulation-of-the-chirp">Mathematical formulation of the chirp<a class="headerlink" href="#mathematical-formulation-of-the-chirp" title="Permanent link">¶</a></h3>
<p>The frequency in every piecewise linear section is given by:</p>
<div class="arithmatex">\[
f(t) = f_0 + \alpha t
\]</div>
<p>Where <span class="arithmatex">\(\alpha\)</span> is the chirp rate, <span class="arithmatex">\(t\)</span> is the time and <span class="arithmatex">\(f_0\)</span> is the initial frequency.</p>
<p>The accumulated phase is given by:</p>
<div class="arithmatex">\[
\phi(t) = 2\pi\sum_{i=0}^{t}(f_0 + \alpha t) = 2\pi(f_0 t + \frac{1}{2}\alpha(t+1)t)
\]</div>
<p>Note that this discrete implementation of the chirp differs by one time-step from the continuous frequency chirp which yields</p>
<div class="arithmatex">\[
f(t) = 2\pi (f_0t + \frac{t^2}{2}\alpha)
\]</div>
<h3 id="continuous-chirp">Continuous chirp<a class="headerlink" href="#continuous-chirp" title="Permanent link">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2-blue"/></a>  The continuous chirp feature only exists in the OPX+</p>
</div>
<p>It is possible to have the frequency chirp continue even after the pulse has stopped playing.
This will cause the frequency to continue increasing in the background and continue during the next play commands.
To use, add to the <code>play</code> command the kwargs <code>continue_chirp=True</code>, such as in the following example:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-42-2" id="__codelineno-42-2" name="__codelineno-42-2"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse"</span><span class="p">,</span> <span class="s2">"qe"</span><span class="p">,</span> <span class="n">chirp</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">25000</span><span class="p">,</span> <span class="s1">'Hz/nsec'</span><span class="p">),</span> <span class="n">continue_chirp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="#__codelineno-42-3" id="__codelineno-42-3" name="__codelineno-42-3"></a>    <span class="n">wait</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s2">"qe"</span><span class="p">)</span>  <span class="c1"># Chirping continues in the background</span>
<a href="#__codelineno-42-4" id="__codelineno-42-4" name="__codelineno-42-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse2"</span><span class="p">,</span> <span class="s2">"qe"</span><span class="p">)</span>  <span class="c1"># Chirping continues, but stops after this pulse ends</span>
<a href="#__codelineno-42-5" id="__codelineno-42-5" name="__codelineno-42-5"></a>
<a href="#__codelineno-42-6" id="__codelineno-42-6" name="__codelineno-42-6"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse"</span><span class="p">,</span> <span class="s2">"qe"</span><span class="p">,</span> <span class="n">chirp</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">25000</span><span class="p">,</span> <span class="s1">'Hz/nsec'</span><span class="p">),</span> <span class="n">continue_chirp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="#__codelineno-42-7" id="__codelineno-42-7" name="__codelineno-42-7"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse2"</span><span class="p">,</span> <span class="s2">"qe"</span><span class="p">,</span> <span class="n">continue_chirp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Chirping continues</span>
<a href="#__codelineno-42-8" id="__codelineno-42-8" name="__codelineno-42-8"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse3"</span><span class="p">,</span> <span class="s2">"qe"</span><span class="p">,</span> <span class="n">chirp</span><span class="o">=</span><span class="p">(</span><span class="mi">25000</span><span class="p">,</span> <span class="s1">'Hz/nsec'</span><span class="p">))</span>  <span class="c1"># Chirping changes to the value given and will stop after this pulse ends</span>
</code></pre></div>
<p>This could be useful when combined with sticky elements, in which case the pulse will continue playing.</p>
<h2 id="crosstalk-matrix">Crosstalk Matrix<a class="headerlink" href="#crosstalk-matrix" title="Permanent link">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2-blue"/></a>  The crosstalk matrix only exists in the OPX+</p>
</div>
<p>It is possible to add crosstalk terms between any ports in the same controller of the OPX.
Adding a crosstalk term means that anything that comes out from a given port of the OPX will also come out of other ports of the OPX, with the given amplitude factor.
The crosstalk is being applied <em>before</em> the <a href="../Guides/output_filter.md/#output-filter">Filters</a>, which means that any filters applied on a port will only affect that specific port.
This could be useful to correct for electronic crosstalk that exists between different control lines.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2-blue"/></a> Adding a crosstalk term to any port will delay <strong>all</strong> analog pulses coming out from all ports. The delay will be 8 cycles (32 ns).
Starting from <a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2.1-blue"/></a>, it is possible to add the <a href="../Guides/features.md/#compilation-options">compilation flag</a> <code>disable-crosstalk-matrix-ports-alignment</code> to only delay the ports which participate in the crosstalk matrix.</p>
</div>
<h3 id="usage-examples">Usage Examples<a class="headerlink" href="#usage-examples" title="Permanent link">¶</a></h3>
<p>The crosstalk terms can be configured at the OPX configuration file, with a different terms applied to each analog output in each controller.
To configure, add a <code>crosstalk</code> term in the <code>analog_outputs</code> field:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="s1">'controllers'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a>        <span class="s1">'con1'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a>            <span class="s1">'analog_outputs'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a>                <span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="s1">'offset'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
<a href="#__codelineno-43-5" id="__codelineno-43-5" name="__codelineno-43-5"></a>                <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="s1">'offset'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">'crosstalk'</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">}},</span>
<a href="#__codelineno-43-6" id="__codelineno-43-6" name="__codelineno-43-6"></a>                <span class="mi">3</span><span class="p">:</span> <span class="p">{</span><span class="s1">'offset'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">'crosstalk'</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">}},</span>
<a href="#__codelineno-43-7" id="__codelineno-43-7" name="__codelineno-43-7"></a>            <span class="p">},</span>
</code></pre></div>
<p>In the example above, any pulse played to output number 1 would also come out from ports 2 &amp; 3 with an amplitude factor of 0.2 and -0.1 respectively, as seen in the following example:</p>
<p>!!<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../crosstalk_output.png"><img alt="crosstalk_output" src="../crosstalk_output.png"/></a></p>
<h2 id="pulse-memory-compression">Pulse Memory Compression<a class="headerlink" href="#pulse-memory-compression" title="Permanent link">¶</a></h2>
<p>In order to optimize memory allocation the QUA compiler takes into account the frequency content of each pulse.
Each waveform's FFT is used to calculate the cutoff frequency f_cut under which 99.9% of the waveform's energy lies.
Each waveform then receives a score based on its cutoff frequency <code>f_cut</code> and the waveform's length.
The memory is then allocated to each waveform based on this score.
The compiler also calculates the error between the original and interpolated waveforms and
issues an error if it is larger than 1e-4:</p>
<p>The user can add to the waveform the parameter <code>maxAllowedError</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="c1"># Setting the 'maxAllowedError' parameter to 1e-2 instead of the default</span>
<a href="#__codelineno-44-2" id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="s1">'waveforms'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-44-3" id="__codelineno-44-3" name="__codelineno-44-3"></a>    <span class="s1">'wf1'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-44-4" id="__codelineno-44-4" name="__codelineno-44-4"></a>        <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'arbitrary'</span><span class="p">,</span>
<a href="#__codelineno-44-5" id="__codelineno-44-5" name="__codelineno-44-5"></a>        <span class="s1">'samples'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.49</span><span class="p">,</span> <span class="mf">0.47</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
<a href="#__codelineno-44-6" id="__codelineno-44-6" name="__codelineno-44-6"></a>        <span class="s1">'maxAllowedError'</span><span class="p">:</span> <span class="mf">1e-2</span>
<a href="#__codelineno-44-7" id="__codelineno-44-7" name="__codelineno-44-7"></a>    <span class="p">},</span>
<a href="#__codelineno-44-8" id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="p">},</span>
</code></pre></div>
<p>That will override the default value (1e-4) allowing the user to tweak memory allocation.
Alternatively, the user can simply control the sampling ratio of the pulse:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="c1"># Setting the 'maxAllowedError' parameter to 1e-2 instead of the default 1e-3</span>
<a href="#__codelineno-45-2" id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="s1">'waveforms'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-45-3" id="__codelineno-45-3" name="__codelineno-45-3"></a>    <span class="s1">'wf1'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-45-4" id="__codelineno-45-4" name="__codelineno-45-4"></a>        <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'arbitrary'</span><span class="p">,</span>
<a href="#__codelineno-45-5" id="__codelineno-45-5" name="__codelineno-45-5"></a>        <span class="s1">'samples'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.49</span><span class="p">,</span> <span class="mf">0.47</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
<a href="#__codelineno-45-6" id="__codelineno-45-6" name="__codelineno-45-6"></a>        <span class="s1">'sampling_rate'</span><span class="p">:</span> <span class="mf">0.5e9</span>
<a href="#__codelineno-45-7" id="__codelineno-45-7" name="__codelineno-45-7"></a>    <span class="p">},</span>
<a href="#__codelineno-45-8" id="__codelineno-45-8" name="__codelineno-45-8"></a><span class="p">},</span>
</code></pre></div>
<p>The <code>sampling_rate</code> parameter specifies the sampling rate in units of Samples/sec.</p>
<p>Any time a pulse is compressed, the compiler will output a warning and the compression factor:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="n">WARNING</span> <span class="o">-</span> <span class="n">Waveform</span> <span class="n">wf_long</span> <span class="n">was</span> <span class="n">compressed</span> <span class="k">with</span> <span class="n">rate</span> <span class="mf">0.6548853220189729</span> <span class="ow">and</span> <span class="n">error</span> <span class="n">of</span> <span class="mf">1.6128764990241962E-13</span>
</code></pre></div>
<h2 id="dynamic-pulse-duration">Dynamic pulse duration<a class="headerlink" href="#dynamic-pulse-duration" title="Permanent link">¶</a></h2>
<p>The duration of the pulse can stretched (but, in the case of an arbitrary waveform, not compressed)
using the 'duration' parameter:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="c1"># Stretching the pulse length</span>
<a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="n">play</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
<a href="#__codelineno-47-3" id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="c1"># One can also use a variable or an expression</span>
<a href="#__codelineno-47-4" id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="n">play</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="o">+</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>'duration' is given in clock cycles units.</li>
<li>The stretched pulse is calculated from the original pulse using a 3rd order Lagrange interpolator on a 4 points running window.</li>
</ul>
<p>The 'duration' parameter can accept a general mathematical expression composed of operators (+, -, *, /),
numbers, QUA variables and QUA functions (such as cos and sin).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When playing an arbitrary waveform, if the value of the duration parameter is set to below the original pulse
length, corrupted output may occur.</p>
</div>
<h2 id="truncate-pulses">Truncate pulses<a class="headerlink" href="#truncate-pulses" title="Permanent link">¶</a></h2>
<p>Part of a pulse can be played by using the 'truncate' parameter:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="c1"># Truncating the pulse length</span>
<a href="#__codelineno-48-2" id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="n">play</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">truncate</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-48-3" id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="c1"># One can also use a variable or an expression</span>
<a href="#__codelineno-48-4" id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="n">play</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">truncate</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
<a href="#__codelineno-48-5" id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="c1"># It is possible to both stretch the pulse and truncate it</span>
<a href="#__codelineno-48-6" id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="n">play</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="n">truncate</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>'truncate' is given in clock cycles units, with the minimum being 4 cycles.</li>
<li>'truncate=n' will cause the first n cycles of the pulse to be played, this could be useful, for example, for exploring the dynamics of a qubit while a pulse is being played.</li>
<li>If a pulse is given a dynamic duration, it will first be stretched to the given duration and then truncated.</li>
</ul>
<p>The 'truncate' parameter can accept a general mathematical expression composed of operators (+, -, *, /),
numbers, QUA variables and QUA functions (such as cos and sin).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the 'truncate' parameter is longer than the pulse duration, it'll cause unexpected results.</p>
</div>
<h2 id="dynamic-port-allocation">Dynamic port allocation<a class="headerlink" href="#dynamic-port-allocation" title="Permanent link">¶</a></h2>
<p>It is possible to define an element with multiple inputs. At runtime, you can select to which port you want to play.</p>
<p>To define such an element in the config, use the <code>singleInputCollection</code> dictionary item:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="s1">'aom_selector'</span><span class="p">:</span> <span class="p">{</span>  <span class="c1"># An example element that can play to either port 1 or 2</span>
<a href="#__codelineno-49-2" id="__codelineno-49-2" name="__codelineno-49-2"></a>    <span class="s2">"singleInputCollection"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-49-3" id="__codelineno-49-3" name="__codelineno-49-3"></a>        <span class="s2">"inputs"</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-49-4" id="__codelineno-49-4" name="__codelineno-49-4"></a>            <span class="s2">"row"</span><span class="p">:</span> <span class="p">(</span><span class="s1">'con1'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<a href="#__codelineno-49-5" id="__codelineno-49-5" name="__codelineno-49-5"></a>            <span class="s2">"column"</span><span class="p">:</span> <span class="p">(</span><span class="s1">'con1'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<a href="#__codelineno-49-6" id="__codelineno-49-6" name="__codelineno-49-6"></a>        <span class="p">}</span>
<a href="#__codelineno-49-7" id="__codelineno-49-7" name="__codelineno-49-7"></a>    <span class="p">},</span>
<a href="#__codelineno-49-8" id="__codelineno-49-8" name="__codelineno-49-8"></a>    <span class="s1">'intermediate_frequency'</span><span class="p">:</span> <span class="mf">100e6</span><span class="p">,</span>
<a href="#__codelineno-49-9" id="__codelineno-49-9" name="__codelineno-49-9"></a>    <span class="s1">'hold_offset'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'duration'</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
<a href="#__codelineno-49-10" id="__codelineno-49-10" name="__codelineno-49-10"></a>    <span class="s1">'operations'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-49-11" id="__codelineno-49-11" name="__codelineno-49-11"></a>        <span class="s1">'pulse'</span><span class="p">:</span> <span class="s2">"pulse"</span><span class="p">,</span>
<a href="#__codelineno-49-12" id="__codelineno-49-12" name="__codelineno-49-12"></a>    <span class="p">},</span>
<a href="#__codelineno-49-13" id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="p">},</span>
</code></pre></div>
<p>At run time, use the <code>target</code> parameter of the <a class="autorefs autorefs-internal" href="../../API_references/qua/dsl_main/#qm.qua._dsl.play"><code>play()</code></a> command:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="n">play</span><span class="p">(</span><span class="s1">'pulse'</span><span class="p">,</span> <span class="s1">'aom_selector'</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">'row'</span><span class="p">)</span>
</code></pre></div>
<h2 id="multiple-inputs">Multiple inputs<a class="headerlink" href="#multiple-inputs" title="Permanent link">¶</a></h2>
<p>When playing a pulse, it is possible to output it from multiple ports simultaneously.
This is done using the <code>multipleInputs</code> dictionary item:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="s1">'qubit'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a>            <span class="s1">'multipleInputs'</span><span class="p">:</span> <span class="c1"># An example elemnt that will play from ports 1 and 2 simultaneously</span>
<a href="#__codelineno-51-3" id="__codelineno-51-3" name="__codelineno-51-3"></a>                <span class="p">{</span>
<a href="#__codelineno-51-4" id="__codelineno-51-4" name="__codelineno-51-4"></a>                    <span class="s1">'inputs'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-51-5" id="__codelineno-51-5" name="__codelineno-51-5"></a>                        <span class="s1">'input1'</span><span class="p">:</span> <span class="p">(</span><span class="s1">'con1'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<a href="#__codelineno-51-6" id="__codelineno-51-6" name="__codelineno-51-6"></a>                        <span class="s1">'input2'</span><span class="p">:</span> <span class="p">(</span><span class="s1">'con1'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span>
<a href="#__codelineno-51-7" id="__codelineno-51-7" name="__codelineno-51-7"></a>                <span class="p">},</span>
<a href="#__codelineno-51-8" id="__codelineno-51-8" name="__codelineno-51-8"></a>            <span class="s1">'operations: {</span>
<a href="#__codelineno-51-9" id="__codelineno-51-9" name="__codelineno-51-9"></a>                <span class="s1">'const'</span><span class="p">:</span> <span class="s1">'const_pulse'</span><span class="p">,</span>
<a href="#__codelineno-51-10" id="__codelineno-51-10" name="__codelineno-51-10"></a>                <span class="p">},</span>
<a href="#__codelineno-51-11" id="__codelineno-51-11" name="__codelineno-51-11"></a>            <span class="p">},</span>
</code></pre></div>
<p>Using the <code>play</code> command:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-52-1" id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-52-2" id="__codelineno-52-2" name="__codelineno-52-2"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'const'</span><span class="p">,</span> <span class="s1">'qubit'</span><span class="p">)</span>
</code></pre></div>
<p>The pulse will then play to both port 1 and port 2 simultaneously, as seen in the figure below:</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../multipleinputs.png"><img alt="multipleinputs" src="../multipleinputs.png"/></a></p>
<h2 id="analog-delay">Analog Delay<a class="headerlink" href="#analog-delay" title="Permanent link">¶</a></h2>
<p><a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2-blue"/></a></p>
<p>We can add a delay to the analog ports of up to 16 microseconds, in units of ns.</p>
<p>To do so, simply specify the desired delay in the <a href="../Introduction/config.md/#controllers">port's configuration</a>. For example</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-53-1" id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="s1">'analog_outputs'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-53-2" id="__codelineno-53-2" name="__codelineno-53-2"></a>    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="s1">'offset'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">'delay'</span><span class="p">:</span> <span class="mi">110</span><span class="p">},</span>
<a href="#__codelineno-53-3" id="__codelineno-53-3" name="__codelineno-53-3"></a>    <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="s1">'offset'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">'delay'</span><span class="p">:</span> <span class="mi">21</span><span class="p">},</span>
<a href="#__codelineno-53-4" id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="p">}</span>
</code></pre></div>
<p>Here we specify a 110 ns delay for all signals coming out of port 1 and a 21 delay on all signals coming out of port 2.</p>
<h2 id="threads">Threads<a class="headerlink" href="#threads" title="Permanent link">¶</a></h2>
<p>The maximum number of quantum elements that can be used simultaneously is limited by the number of processing threads in the hardware.
A single-input quantum element requires one thread and a mixed input (IQ) element uses two <em>threads</em>, one for each channel.
The OPX has <span class="arithmatex">\(N_{threads}=10\)</span> <em>threads</em> and the OPX+ has <span class="arithmatex">\(N_{threads}=18\)</span>.
By default, <em>threads</em> are not shared between different quantum elements. However, two (or more) quantum elements which
are never played together can share a <em>thread</em>, as explained below. Sharing threads allow the user to define more quantum elements and write more complex programs.</p>
<h3 id="automatic-thread-allocation">Automatic Thread Allocation<a class="headerlink" href="#automatic-thread-allocation" title="Permanent link">¶</a></h3>
<p>It is possible to add a flag when executing a QUA program that will enable the <em>Automatic Thread Allocation</em>. In order to enable it, use:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-54-1" id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="n">qm</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="s1">'auto-element-thread'</span><span class="p">])</span>
</code></pre></div>
<p>When the flag is set, the QUA compiler will automatically try to figure out which elements are never played together and these elements will share a <em>thread</em>.
Since the code can be complicated and not deterministic, the compiler uses the <code>align</code> statement to know which quantum elements are playing in parallel and which are not.
For example:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-55-1" id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog1</span><span class="p">:</span>
<a href="#__codelineno-55-2" id="__codelineno-55-2" name="__codelineno-55-2"></a>    <span class="n">a</span> <span class="o">=</span> <span class="n">declare</span><span class="p">(</span><span class="n">fixed</span><span class="p">)</span>
<a href="#__codelineno-55-3" id="__codelineno-55-3" name="__codelineno-55-3"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"marker"</span><span class="p">,</span> <span class="s2">"qeDig"</span><span class="p">)</span>
<a href="#__codelineno-55-4" id="__codelineno-55-4" name="__codelineno-55-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse"</span><span class="p">,</span> <span class="s2">"qe2"</span><span class="p">)</span>
<a href="#__codelineno-55-5" id="__codelineno-55-5" name="__codelineno-55-5"></a>    <span class="n">align</span><span class="p">(</span><span class="s2">"qe2"</span><span class="p">,</span> <span class="s2">"qeDig"</span><span class="p">)</span>
<a href="#__codelineno-55-6" id="__codelineno-55-6" name="__codelineno-55-6"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"marker"</span><span class="p">,</span> <span class="s2">"qeDig"</span><span class="p">)</span>
<a href="#__codelineno-55-7" id="__codelineno-55-7" name="__codelineno-55-7"></a>    <span class="k">with</span> <span class="n">for_</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mf">0.9</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">):</span>
<a href="#__codelineno-55-8" id="__codelineno-55-8" name="__codelineno-55-8"></a>        <span class="n">play</span><span class="p">(</span><span class="s2">"pulse"</span> <span class="o">*</span> <span class="n">amp</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="s2">"qe1"</span><span class="p">)</span>
</code></pre></div>
<p>It seems that "qeDig" plays in parallel with both "qe1" and "qe2", but "qe1" and "qe2" never play in parallel.
This means that "qe2" and "qe1" can share the same <em>thread</em>.</p>
<p>Because the <code>align</code> statement is being used for the Automatic Thread Allocation, it is important to use it whenever possible.</p>
<h3 id="manual-thread-allocation">Manual Thread Allocation<a class="headerlink" href="#manual-thread-allocation" title="Permanent link">¶</a></h3>
<p>It is also possible to manually assign the <em>threads</em> to the quantum elements, when defining them, in the following manner:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-56-1" id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
<a href="#__codelineno-56-2" id="__codelineno-56-2" name="__codelineno-56-2"></a>    <span class="o">...</span>
<a href="#__codelineno-56-3" id="__codelineno-56-3" name="__codelineno-56-3"></a>    <span class="s1">'elements'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-56-4" id="__codelineno-56-4" name="__codelineno-56-4"></a>        <span class="s1">'qe1'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-56-5" id="__codelineno-56-5" name="__codelineno-56-5"></a>            <span class="s2">"thread"</span><span class="p">:</span> <span class="s2">"a"</span><span class="p">,</span>
<a href="#__codelineno-56-6" id="__codelineno-56-6" name="__codelineno-56-6"></a>            <span class="o">...</span>
<a href="#__codelineno-56-7" id="__codelineno-56-7" name="__codelineno-56-7"></a>        <span class="p">},</span>
<a href="#__codelineno-56-8" id="__codelineno-56-8" name="__codelineno-56-8"></a>        <span class="s1">'qe2'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-56-9" id="__codelineno-56-9" name="__codelineno-56-9"></a>            <span class="s2">"thread"</span><span class="p">:</span> <span class="s2">"a"</span><span class="p">,</span>
<a href="#__codelineno-56-10" id="__codelineno-56-10" name="__codelineno-56-10"></a>            <span class="o">...</span>
<a href="#__codelineno-56-11" id="__codelineno-56-11" name="__codelineno-56-11"></a>        <span class="p">},</span>
<a href="#__codelineno-56-12" id="__codelineno-56-12" name="__codelineno-56-12"></a>        <span class="s1">'qe3'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-56-13" id="__codelineno-56-13" name="__codelineno-56-13"></a>            <span class="s2">"thread"</span><span class="p">:</span> <span class="s2">"b"</span><span class="p">,</span>
<a href="#__codelineno-56-14" id="__codelineno-56-14" name="__codelineno-56-14"></a>            <span class="o">...</span>
<a href="#__codelineno-56-15" id="__codelineno-56-15" name="__codelineno-56-15"></a>        <span class="p">},</span>
<a href="#__codelineno-56-16" id="__codelineno-56-16" name="__codelineno-56-16"></a>        <span class="s1">'qe4'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-56-17" id="__codelineno-56-17" name="__codelineno-56-17"></a>            <span class="o">...</span>
<a href="#__codelineno-56-18" id="__codelineno-56-18" name="__codelineno-56-18"></a>        <span class="p">},</span>
<a href="#__codelineno-56-19" id="__codelineno-56-19" name="__codelineno-56-19"></a>    <span class="p">}</span>
<a href="#__codelineno-56-20" id="__codelineno-56-20" name="__codelineno-56-20"></a>    <span class="o">...</span>
<a href="#__codelineno-56-21" id="__codelineno-56-21" name="__codelineno-56-21"></a><span class="p">}</span>
</code></pre></div>
<p>In the example above, "qe2" and "qe1" are assigned to <em>thread</em> "a" and can never run at the same time. "qe3" is being assigned to <em>thread</em> "b".
Any quantum element which does not have a <em>thread</em> directly specified will have its own <em>thread</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If "qe1" has a two inputs (i.e. an IQ pair) it will actually be assigned two <em>threads</em>.
If "qe2" has a single input, it will use one of the <em>threads</em> which is used by "qe1".</p>
</div>
<p>If "qe2" and "qe1" will given a play command, they will be played one after the other and not at the same time. For example:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-57-1" id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-57-2" id="__codelineno-57-2" name="__codelineno-57-2"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse1"</span><span class="p">,</span> <span class="s2">"qe1"</span><span class="p">)</span>
<a href="#__codelineno-57-3" id="__codelineno-57-3" name="__codelineno-57-3"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse2"</span><span class="p">,</span> <span class="s2">"qe2"</span><span class="p">)</span>
<a href="#__codelineno-57-4" id="__codelineno-57-4" name="__codelineno-57-4"></a>    <span class="n">play</span><span class="p">(</span><span class="s2">"pulse3"</span><span class="p">,</span> <span class="s2">"qe3"</span><span class="p">)</span>
</code></pre></div>
<p>In the example above, "qe1" will be played first and only when it is done "qe2" will be played.
Because "qe3" is on another <em>thread</em>, it will start immediately with "qe1".</p>
<h2 id="oscillators">Oscillators<a class="headerlink" href="#oscillators" title="Permanent link">¶</a></h2>
<p>In addition to limited threads, there is also a limited number of internal oscillators. The OPX has <span class="arithmatex">\(N_{osc}=10\)</span>
and the OPX+ has <span class="arithmatex">\(N_{osc}=18\)</span>. This limits the number of quantum elements <strong>with an intermediate frequency</strong>.
However, it is possible to share oscillators between different elements.
For information on how to define shared oscillators, see the <a href="../Introduction/config.md/#oscillators">configuration</a> page.</p>
<p>Sharing oscillators between elements shares their frequency, their frame and their mixer correction matrix.
This means that any operation that affects these on any of the elements, would affect them all.
In the following example, <code>qe1</code>, <code>qe2</code> and <code>qe3</code> share an oscillator:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-58-1" id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="k">with</span> <span class="n">program</span><span class="p">()</span> <span class="k">as</span> <span class="n">prog</span><span class="p">:</span>
<a href="#__codelineno-58-2" id="__codelineno-58-2" name="__codelineno-58-2"></a>    <span class="n">update_frequency</span><span class="p">(</span><span class="s2">"qe1"</span><span class="p">,</span> <span class="mf">50e6</span><span class="p">)</span>
<a href="#__codelineno-58-3" id="__codelineno-58-3" name="__codelineno-58-3"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'const'</span><span class="p">,</span> <span class="s1">'qe2'</span><span class="p">)</span>  <span class="c1"># Plays a 50 MHz pulse</span>
<a href="#__codelineno-58-4" id="__codelineno-58-4" name="__codelineno-58-4"></a>    <span class="n">update_frequency</span><span class="p">(</span><span class="s2">"qe1"</span><span class="p">,</span> <span class="mf">100e6</span><span class="p">)</span>
<a href="#__codelineno-58-5" id="__codelineno-58-5" name="__codelineno-58-5"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'const'</span><span class="p">,</span> <span class="s1">'qe2'</span><span class="p">)</span>  <span class="c1"># Plays a 100 MHz pulse</span>
<a href="#__codelineno-58-6" id="__codelineno-58-6" name="__codelineno-58-6"></a>    <span class="n">frame_rotation_2pi</span><span class="p">(</span><span class="s2">"qe3"</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<a href="#__codelineno-58-7" id="__codelineno-58-7" name="__codelineno-58-7"></a>    <span class="n">play</span><span class="p">(</span><span class="s1">'const'</span><span class="p">,</span> <span class="s1">'qe2'</span><span class="p">)</span>  <span class="c1"># Plays a 100 MHz pulse, but with the frame rotated by pi</span>
</code></pre></div>
<h2 id="precompile-jobs">Precompile Jobs<a class="headerlink" href="#precompile-jobs" title="Permanent link">¶</a></h2>
<p>It is possible to separate the compilation and the execution parts of running a job, which is useful when a job is
repeated many times and the compilation run time is not negligible.
To precompile a job, use the <code>compile</code> function:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-59-1" id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="n">program_id</span> <span class="o">=</span> <span class="n">qm</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>
</code></pre></div>
<p>This will return a <code>program_id</code>, which can later be directly added to the <code>JobQueue</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-60-1" id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="n">qm</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">add_compiled</span><span class="p">(</span><span class="n">program_id</span><span class="p">)</span>
</code></pre></div>
<p>This can be done many times with a program which has been compiled once.</p>
<p>In addition, it is possible to change an analog waveform between runs using the <code>overrides</code> argument of the
<code>add_compiled</code> function:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-61-1" id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="n">qm</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">add_compiled</span><span class="p">(</span><span class="n">program_id</span><span class="p">,</span> <span class="n">overrides</span><span class="o">=</span><span class="p">{</span>
<a href="#__codelineno-61-2" id="__codelineno-61-2" name="__codelineno-61-2"></a>    <span class="s1">'waveforms'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-61-3" id="__codelineno-61-3" name="__codelineno-61-3"></a>        <span class="s1">'my_arbitrary_waveform'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.02</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
<a href="#__codelineno-61-4" id="__codelineno-61-4" name="__codelineno-61-4"></a>        <span class="s1">'my_constant_waveform'</span><span class="p">:</span> <span class="mf">0.2</span>
<a href="#__codelineno-61-5" id="__codelineno-61-5" name="__codelineno-61-5"></a>    <span class="p">}</span>
<a href="#__codelineno-61-6" id="__codelineno-61-6" name="__codelineno-61-6"></a><span class="p">})</span>
</code></pre></div>
<p>An arbitrary waveform has to be declared as overridable in advance in the configuration file. For the example above:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-62-1" id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="s1">'my_arbitrary_waveform'</span><span class="p">:</span> <span class="p">{</span>
<a href="#__codelineno-62-2" id="__codelineno-62-2" name="__codelineno-62-2"></a>    <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'arbitrary'</span><span class="p">,</span>
<a href="#__codelineno-62-3" id="__codelineno-62-3" name="__codelineno-62-3"></a>    <span class="s1">'is_overridable'</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a href="#__codelineno-62-4" id="__codelineno-62-4" name="__codelineno-62-4"></a>    <span class="s1">'samples'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span>
<a href="#__codelineno-62-5" id="__codelineno-62-5" name="__codelineno-62-5"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The number of samples in the new waveform has to be the same as in the old waveform.
It is currently not possible to change the bandwidth of an overridable arbitrary waveform. Therefore the
<code>samplingRate</code> and <code>maxAllowedError</code> properties are not supported when "<code>is_overridable</code>: True".</p>
</div>
<h2 id="compilation-options">Compilation options<a class="headerlink" href="#compilation-options" title="Permanent link">¶</a></h2>
<p>There are a few optional features and modification in the compilation process from QUA to the OPX low-level code.
These options can be activated by passing a list of flags to the execution, compile or simulation commands as shown below:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-63-1" id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="n">qm</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="s1">'flag1'</span><span class="p">,</span> <span class="s1">'flag2'</span><span class="p">])</span>  <span class="c1"># execution</span>
<a href="#__codelineno-63-2" id="__codelineno-63-2" name="__codelineno-63-2"></a><span class="n">qm</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="s1">'flag1'</span><span class="p">,</span> <span class="s1">'flag2'</span><span class="p">])</span>  <span class="c1"># compilation</span>
<a href="#__codelineno-63-3" id="__codelineno-63-3" name="__codelineno-63-3"></a><span class="n">qmm</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">prog</span><span class="p">,</span> <span class="n">SimulationConfig</span><span class="p">(</span><span class="n">duration</span><span class="p">),</span> <span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="s1">'flag1'</span><span class="p">,</span> <span class="s1">'flag2'</span><span class="p">])</span> <span class="c1"># simulation</span>
</code></pre></div>
<p>The following is a short list of optional flags and their description:</p>
<ul>
<li>'auto-element-thread' - Used when thread sharing is required. The compiler will automatically determine which elements can share a thread and allocate the resources accordingly. See further information <a href="../Guides/features.md/#threads">here</a>.</li>
<li>'disable-filtered-ports-alignment' - Starting from version <a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2-blue"/></a> on OPX+, this flag will disable the temporal alignment between analog ports that are filtered with a digital output filter and those that are not. This will reduce latency for unfiltered ports when using the filters. In addition, this flag will disable the automatic adjustment of the time-of-flight and digital delays parameters in the configuration. Read more about the latency in the <a href="../Guides/output_filter.md/#output-filter">output filter guide</a>.</li>
<li>'disable-crosstalk-matrix-ports-alignment' - Starting from version <a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2.1-blue"/></a> on OPX+, this flag will disable the temporal alignment between analog ports that participate in the crosstalk matrix and those that are not. This will reduce latency for these ports when using the crosstalk matrix. In addition, this flag will disable the automatic adjustment of the time-of-flight and digital delays parameters in the configuration. Read more about the latency in the <a href="../Guides/features.md/#crosstalk-matrix">output filter guide</a>.</li>
<li>'skip-loop-unrolling' -  Disables an optimization over loop iterations. This gives faster compilation time at the cost of more program memory use and possibly more gaps.</li>
<li>'skip-loop-rolling' - Disables another optimization over loop iterations. This gives faster compilation time at the cost of more program memory use.</li>
<li>'not-strict-timing' - <a class="middle" href="https://qm-docs.qualang.io/about_doc.html#shields"><img alt="QOP" class="middle" src="https://img.shields.io/badge/OPX+-2-blue"/></a> Gaps within a <a class="autorefs autorefs-internal" href="../../API_references/qua/dsl_main/#qm.qua._dsl.strict_timing_"><code>strict_timing_()</code></a> block will not block execution by raising warnings instead of errors. Read more about the strict timing feature <a href="../Guides/timing_in_qua.md/#strict-timing">here</a>.</li>
</ul>
<p>For example, in the following code, we use the automatic thread allocation:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-64-1" id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="n">qm</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="s1">'auto-element-thread'</span><span class="p">])</span>  <span class="c1"># execution</span>
</code></pre></div>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Last update">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-02-22T13:41:51+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-02-22</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="Created">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-02-07T11:01:12+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-02-07</span>
</span>
</aside>
<form class="md-feedback" hidden="" name="feedback">
<fieldset>
<legend class="md-feedback__title">
        Was this page helpful?
      </legend>
<div class="md-feedback__inner">
<div class="md-feedback__list">
<button class="md-feedback__icon md-icon" data-md-value="1" title="This page was helpful" type="submit">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"></path></svg>
</button>
<button class="md-feedback__icon md-icon" data-md-value="0" title="This page could be improved" type="submit">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"></path></svg>
</button>
</div>
<div class="md-feedback__note">
<div data-md-value="1" hidden="">
              
              
                
              
              Thanks for your feedback!
            </div>
<div data-md-value="0" hidden="">
              
              
                
              
              

Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/qua-platform/qua-platform.github.io/issues/new?title=[Feedback]+QUA%20Language%20features+-+/qm-qua-sdk/docs/Guides/features/" rel="noopener" target="_blank">feedback form</a>.
            </div>
</div>
</div>
</fieldset>
</form>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2023 Q.M Technologies Ltd.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs Insiders
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="analytics" type="checkbox"/>
<span class="task-list-indicator"></span>
          Google Analytics
        </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
<script id="__config" type="application/json">{"base": "../../../..", "features": ["search", "search.suggest", "search.highlight", "search.share", "navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.top", "content.code.annotate", "content.code.copy", "content.code.select", {"minify_html": true}], "search": "../../../../assets/javascripts/workers/search.6c7302c4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
<script src="../../../../assets/javascripts/bundle.b7178837.min.js"></script>
<script src="../../../../js/timeago.min.js"></script>
<script src="../../../../js/timeago_mkdocs_material.js"></script>
<script src="../../../../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../../../../javascripts/redoc.standalone.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>